# 8. ê³ ê¸‰ íƒìƒ‰ ì•Œê³ ë¦¬ì¦˜ (2)

ìµœì†Œ í™ì€ ë°ì´í„° ì¶”ê°€/ì‚­ì œ ì‹œ O(logn)ì˜ ì‹œê°„ë³µì¡ë„ë¥¼ ê°€ì§„ë‹¤. ë°°ì—´ì´ O(n)ì˜ ì‹œê°„ë³µì¡ë„ë¥¼ ê°–ëŠ” ê²ƒì— ë¹„í•´ ë¹ ë¥´ê¸° ë•Œë¬¸ì— ìš°ì„ ìˆœìœ„ íì²˜ëŸ¼ ìµœëŒ€/ìµœì†Œ ê°’ì„ ë¹ ë¥´ê²Œ ì°¾ì•„ì•¼ í•˜ëŠ” ìë£Œêµ¬ì¡° ë° ì•Œê³ ë¦¬ì¦˜ êµ¬í˜„ ë“±ì— í™œìš©ëœë‹¤.

## 1927. ìµœì†Œ í™

ë¬¸ì œ ìœ í˜•: `í™, ìë£Œêµ¬ì¡°`, ë‚œì´ë„: `í•˜`

### ë¬¸ì œ í’€ì´ ì•„ì´ë””ì–´

1) ìµœì†Œ í™ì˜ ê¸°ë³¸ì ì¸ ê¸°ëŠ¥ì„ êµ¬í˜„
2) íŒŒì´ì¬ì˜ **heapq** ë‚´ì¥ëª¨ë“ˆì„ ì´ìš©í•˜ë©´ ê°„ë‹¨í•˜ê²Œ í™ì„ êµ¬í˜„í•  ìˆ˜ ìˆìŒ

#### ë‚´ê°€ ì‘ì„±í•œ ì½”ë“œ

```python
import heapq
import sys
heap = []
N = int(sys.stdin.readline())
for i in range(N):
    command = int(sys.stdin.readline())
    if command != 0:
        heapq.heappush(heap, command)
    else:
        if len(heap) == 0:
            print(0)
        else:
            print(heapq.heappop(heap))
```

input() ì“°ë‹ˆê¹Œ ì‹œê°„ì´ˆê³¼ ëœ¬ë‹¤. ì…ë ¥ë˜ëŠ” ìˆ˜ì˜ ë²”ìœ„ê°€ 2^31ë¡œ ì—„ì²­ ì»¤ì„œ ê·¸ëŸ°ë“¯.
ìˆ˜ ë²”ìœ„ ì˜ í™•ì¸í•˜ê³  `sys.stdin.readline()` ì„ ì“°ë„ë¡!

#### ë‹µì•ˆ ì½”ë“œ

```python
import heapq

n = int(input())
heap = []
result = []

for _ in range(n):
  data = int(input())
  if data == 0:
    if heap:
      result.append(heapq.heappop(heap))
    else:
      result.append(0)
  else:
    heapq.heappush(heap, data)
for data in result:
  print(data)
```
### Lesson learned

#### Heapq ë‚´ì¥ ëª¨ë“ˆ ì‚¬ìš©ë²• [ì°¸ê³  ë§í¬](https://www.daleseo.com/python-heapq/)

ë‚´ì¥ ëª¨ë“ˆì¸ heapq ëª¨ë“ˆì€ binary tree ê¸°ë°˜ì˜ ìµœì†Œ í™ ìë£Œêµ¬ì¡°ë¥¼ ì œê³µí•¨.
**ë³„ê°œì˜ ìë£Œêµ¬ì¡°ê°€ ì•„ë‹ˆë¼, heapq ëª¨ë“ˆì„ í†µí•´ì„œ ì›ì†Œë¥¼ ì¶”ê°€í•˜ê±°ë‚˜ ì‚­ì œí•˜ë©´ ê·¸ëƒ¥ ê·¸ ë¦¬ìŠ¤íŠ¸ê°€ ìµœì†Œ í™**ì„.

ë”°ë¼ì„œ heapq ëª¨ë“ˆì˜ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ë•Œ ë§ˆë‹¤ í•´ë‹¹ ë¦¬ìŠ¤íŠ¸ë¥¼ **ì¸ì**ë¡œ ë„˜ê²¨ì•¼ í•¨.

```python
import heapq

# heqpq ëª¨ë“ˆì€ íŒŒì´ì¬ì˜ listë¥¼ ìµœì†Œ í™ì²˜ëŸ¼ ë‹¤ë£° ìˆ˜ ìˆë„ë¡ í•´ì¤Œ
heap = [] 
# í™ì— ì›ì†Œ ì¶”ê°€
heapq.heappush(heap, 4)
# í™ì—ì„œ ì›ì†Œ ì‚­ì œ
heapq.heappop(heap)
```

`heapq.heapify` í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ ê¸°ì¡´ ë¦¬ìŠ¤íŠ¸ë¥¼ í™ìœ¼ë¡œ ë³€í™˜í•˜ê¸°

```python
hheap = [4, 1, 7, 3, 8, 5]
heapq.heapify(heap)
print(heap) # [1, 3, 5, 4, 8, 7]
```

ì°¸ê³ ) heapify ëŠ” O(N) ì˜ ì‹œê°„ë³µì¡ë„ë¥¼ ê°€ì§

---

## 1715. ì¹´ë“œ ì •ë ¬í•˜ê¸° â­ï¸

ë¬¸ì œ ìœ í˜•: `í™, ìë£Œêµ¬ì¡°, ê·¸ë¦¬ë””` ë‚œì´ë„: `í•˜`

### ë¬¸ì œ í’€ì´ ì•„ì´ë””ì–´

1) ê°€ì¥ í¬ê¸°ê°€ ì‘ì€ ì¹´ë“œ ë¬¶ìŒì„ ê°€ì¥ ë¨¼ì € í•©ì³¤ì„ ë•Œ ë¹„êµ íšŸìˆ˜ê°€ ê°€ì¥ ì‘ìŒ

#### ğŸš« ë‚´ê°€ ì‘ì„±í•œ ì½”ë“œ (ì¶œë ¥ ì´ˆê³¼)

ì•„...í—·ê°ˆë ¤...ğŸ¤¯ ì™œ ì¶œë ¥ì´ˆê³¼ê°€ ëœ¬ ê±´ì§€ ì˜ ëª¨ë¥´ê² ë‹¤.

ë¬¸ì œì  1: ì•„ë§ˆ lenì´ 1ì¼ë•ŒëŠ” ë¹„êµ íšŸìˆ˜ê°€ 0ì´ì–´ì„œ ê·¸ëŸ°ë“¯..? í 

ë¬¸ì œì  2: **sum_value ë¥¼ ë‹¤ì‹œ heapì— push** í•´ì¤˜ì•¼ í–ˆë‹¤. ê°€ì¥ í¬ê¸°ê°€ ì‘ì€ ìˆ«ì ì¹´ë“œ ë¬¶ìŒì„ ë¨¼ì € í•©ì¹˜ëŠ” ê±°ë‹ˆê¹Œ, í•©ì¹œ ì¹´ë“œ ë¬¶ìŒì´ ë°˜ë“œì‹œ ë‹¤ìŒì— ë°”ë¡œ ë˜ ë‹¤ì‹œ í•©ì³ì§€ëŠ” ìµœì†Œ ì¹´ë“œ ë¬¶ìŒì´ë¼ëŠ” ë³´ì¥ì€ ì—†ìœ¼ë‹ˆ.

ex) 10, 30, 35, 36 

```python
import heapq
import sys

heap = list()
n = int(input())
result = 0

for i in range(n):
    data = int(sys.stdin.readline())
    heapq.heappush(heap, data)

if len(heap) <= 1:
    result = heapq.heappop(heap)
else:
    a = heapq.heappop(heap)
    b = heapq.heappop(heap)
    result = a + b

while len(heap) > 0:
    a = heapq.heappop(heap)
    result += result + a

print(result)
```

#### ë‹µì•ˆ ì½”ë“œ

```python
import heapq
import sys

heap = list()
n = int(input())
result = 0

for i in range(n):
    data = int(sys.stdin.readline())
    heapq.heappush(heap, data)

while len(heap) > 1:
  a = heapq.heappop(heap)
  b = heapq.heappop(heap)
  sum_value = a+b
  result += sum_value
  heapq.heappush(sum_value)

print(result)
```

----

## 1766. ë¬¸ì œì§‘

ë¬¸ì œ ìœ í˜•: `í™, ìœ„ìƒ ì •ë ¬` ë‚œì´ë„: `ì¤‘`

### ë¬¸ì œ í’€ì´ ì•„ì´ë””ì–´

1) ì „í˜•ì ì¸ ìœ„ìƒ ì •ë ¬ ë¬¸ì œ
2) ìœ„ìƒ ì •ë ¬ì€, ìˆœì„œê°€ ì •í•´ì ¸ ìˆëŠ” ì‘ì—…ì„ ì°¨ë¡€ë¡œ ìˆ˜í–‰í•´ì•¼ í•  ë•Œ ìˆœì„œë¥¼ ê²°ì •í•´ì£¼ëŠ” ì•Œê³ ë¦¬ì¦˜
3) ìœ„ìƒ ì •ë ¬ì˜ ì‹œê°„ ë³µì¡ë„ëŠ” O(V+E)

#### ë‚´ê°€ ì‘ì„±í•œ ì½”ë“œ

```python
ì–´ë ¤ì›Œ...
ìœ„ìƒ ì •ë ¬ ì•„ì´ë””ì–´ëŠ” ì´í•´ë˜ëŠ”ë°, heapqì—ì„œ popë˜ì—ˆì„ë•Œ popëœ ì›ì†Œì™€ ì—°ê²°ëœ ê°„ì„ ì„ ì œê±°í•˜ëŠ” ë²•ì„ ëª¨ë¥´ê² ë‹¤.
ê·¸ë˜í”„ì™€ ì°¨ìˆ˜ë¥¼ ì–´ë–»ê²Œ í‘œì‹œí•´ì•¼ í•˜ì§€? ğŸ˜«

import heapq
N, M = map(int, input().split())
priority = [[] for i in range(N)]
for i in range(1, M+1):
    A, B = map(int, input().split())
    priority[B].append(A)

result = []
dependent = []

for i in range(1, N+1):
    if not priority[i]:
        heapq.heappush(result, i)

while result:
    popped = heapq.heappop(result)
    print(popped)
    for i in range(1,N+1)

```

#### ë‹µì•ˆ ì½”ë“œ

arrayì™€ **indegree**ë¥¼ ë³„ë„ë¡œ ê´€ë¦¬í•¨ìœ¼ë¡œì¨ heapì—ì„œ pop ë  ë•Œë§ˆë‹¤ indegreeê°€ 0ì´ ë˜ëŠ” ì• ë¥¼ ë°”ë¡œ ì°¾ì•„ë‚¼ ìˆ˜ ìˆë‹¤. **ì§„ì…ì°¨ìˆ˜**ë¥¼ ë¦¬ìŠ¤íŠ¸ë¡œ ê´€ë¦¬í•˜ëŠ” ê²ƒì´ í•µì‹¬.

```python
import heapq

n, m = map(int, input().split())
array = [[] for i in range(n+1)] # ìê¸°ê°€ ì–´ë–¤ ë…¸ë“œë‘ ì—°ê²°ë˜ì–´ ìˆëŠ”ì§€ì— ëŒ€í•œ ì •ë³´
indegree = [0] * (n+1) # ì—°ê²° ë‹¹í•œ ë…¸ë“œì˜ ì§„ì…ì°¨ìˆ˜ê°€ ëª‡ì¸ì§€

heap = []
result = []

for _ in range(m):
  x,y = map(int, input().split())
  array[x].append(y)
  indegree[y] += 1

for i in range(1, n+1):
  if indegree[i] == 0:
    heapq.heappush(heap,i)

result = []

while heap:
  data = heapq.heappop(heap)
  result.append(data)
  for y in array[data]:
    indegree[y] -= 1
    if indegree[y] == 0:
      heapq.heappush(heap,y)
      
for i in result:
  print(i, end = ' ')
```
#### ë‹¤ì‹œ ì‘ì„±í•´ë³¸ ì½”ë“œ

```python
import heapq

n, m = map(int, input().split())
priority = [[] for i in range(n+1)]

indegree = [0 for i in range(n+1)]

for i in range(1, m+1):
    A, B = map(int, input().split())
    priority[A].append(B)
    indegree[B] += 1

result = []

for i in range(1, n+1):
    if indegree[i] == 0:
        heapq.heappush(result, i)

while result:
    popped = heapq.heappop(result)
    print(popped)
    for j in priority[popped]:
        indegree[j] -= 1
        if indegree[j] == 0:
            heapq.heappush(result, j)
```

ì•„ë”° ì–´ë µë‹¤

### Lesson learned

#### ìœ„ìƒ ì •ë ¬ ì•Œê³ ë¦¬ì¦˜ (Topology Sort)

ê¸°ë³¸ì ìœ¼ë¡œ ì‚¬ì´í´ì´ ìˆìœ¼ë©´ ì•ˆë¨. ì‚¬ì´í´ì´ ìˆìœ¼ë©´ ì‹œì‘ì ì„ ì°¾ì„ ìˆ˜ ì—†ê¸° ë•Œë¬¸ì—.

1) ì§„ì… ì°¨ìˆ˜ (ë“¤ì–´ì˜¤ëŠ” ê°„ì„ ì˜ ìˆ˜) ê°€ 0ì¸ ì •ì ì„ **í** (ì´ ë¬¸ì œì˜ ê²½ìš° heap = ìš°ì„ ìˆœìœ„í)ì— ì‚½ì… 
2) íì—ì„œ ì›ì†Œë¥¼ êº¼ë‚´ í•´ë‹¹ ì›ì†Œì™€ ê°„ì„ ì„ ì œê±°
3) ì œê±° ì´í›„ì— ì§„ì… ì°¨ìˆ˜ê°€ 0ì´ ëœ ì •ì ì„ íì— ì‚½ì…
4) íê°€ ë¹Œ ë•Œê¹Œì§€ 2,3ì„ ë°˜ë³µ

ëª¨ë“  ì›ì†Œë¥¼ ë°©ë¬¸í–ˆë‹¤ë©´ íì—ì„œ êº¼ë‚¸ ìˆœì„œê°€ ìœ„ìƒ ì •ë ¬ì˜ ê²°ê³¼ì„.

#### ì´ˆê¸°í™” í•´ì£¼ê¸°

```python
priority = [[] for i in range(n+1)]
indegree = [0 for i in range(n+1)]
```

ì¸ë±ìŠ¤ë¥¼ í™œìš©í•´ì•¼ í•˜ë‹ˆ range(n+1) ë§Œí¼ì˜ ë¦¬ìŠ¤íŠ¸ë¥¼ ì´ˆê¸°í™” í•´ì£¼ê¸°.