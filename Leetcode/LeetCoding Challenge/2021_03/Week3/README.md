# Week 3

## [Best Time to Buy and Sell Stock with Transaction Fee](https://leetcode.com/explore/featured/card/march-leetcoding-challenge-2021/590/week-3-march-15th-march-21st/3674/)

ë­”ê°€ DPë¼ëŠ”ê±´ ê°ì´ ì˜¤ëŠ”ë°... DP í‘¸ëŠ” ë²•ì„ ê¹Œë¨¹ì–´ì‚ë”°...ğŸ¤­ ë„ˆë¬´ ì‰¬ì—ˆë‹¤...í•˜ë‚˜ë„ ê¸°ì–µì´ ì•ˆë‚œë‹¤...ê·¸ë˜ì„œ ë‹µì§€ë¥¼ ë´¤ìŠµë‹ˆë‹¤...

ì ìƒê°ì„ í•´ë³´ì.

priceê°€ kì¸ iì‹œì ì—ì„œ, ë‚´ê°€ ì·¨í•  ìˆ˜ ìˆëŠ” í–‰ë™ì€ ì•„ë˜ì™€ ê°™ë‹¤.

- ê¸°ì¡´ì— ì£¼ì‹ì´ ìˆì„ ë•Œ
  - k ê°€ê²©ì— ì£¼ì‹ íŒ”ê¸°
  - ì•„ë¬´ê²ƒë„ ì•ˆí•˜ê¸° (ê¸°ì¡´ ì£¼ì‹ íŒ”ì§€ ì•Šê³  ìœ ì§€í•˜ê¸°)
- ê¸°ì¡´ì— ì£¼ì‹ì´ ì—†ë‹¤ë©´
  - k ê°€ê²©ì— ì£¼ì‹ ì‚¬ê¸°
  - ì•„ë¬´ê²ƒë„ ì•ˆí•˜ê¸° (ì£¼ì‹ ì‚¬ì§€ ì•Šê¸°)

ê¸°ì¡´ì— ì£¼ì‹ì´ ìˆì„ ë•Œì™€ ì—†ì„ë•Œë¡œ ë‚˜ëˆ ì•¼ í•œë‹¤ëŠ” ëŠë‚Œì´ ì‚´ì‚´ ì˜¨ë‹¤. i > i+1 ë‹¨ê³„ì—ì„œì˜ ë³€í™”ë¥¼ ìƒê°í•´ ë³´ë©´ ì•„ë˜ì™€ ê°™ì€ í‘œë¡œ ì •ë¦¬ ê°€ëŠ¥í•˜ë‹¤. í‘œ ì•ˆì— ë“¤ì–´ê°€ëŠ” ê°’ì€ "í˜„ì¬ ë³´ìœ í•˜ê³  ìˆëŠ” í˜„ê¸ˆ" ì´ë‹¤.

transaction feeëŠ” íŒë§¤í•  ë•Œë§Œ 3ì”© ë¶€ê³¼ëœë‹¤ê³  ê°€ì •í•œë‹¤.

| ë³€í™” ìƒíƒœ / ì£¼ì‹ ê°€ê²© | 1                             | 3             | 7                     | 5            | 10                    | 3                |
| --------------------- | ----------------------------- | ------------- | --------------------- | ------------ | --------------------- | ---------------- |
| ì£¼ì‹ ë³´ìœ  > ë¯¸ë³´ìœ     | x (ì²˜ìŒì—” ì£¼ì‹ ë³´ìœ ê°€ ë¶ˆê°€ëŠ¥) | -1+3-3 = -1   | -1+7-3 = **3** : cash | -1+5-3= 1    | -1+10-3= **6** : cash | -1+3-3= -1       |
| ì£¼ì‹ ë¯¸ë³´ìœ  > ë¯¸ë³´ìœ   | **0** : cash                  | **0** : cash  | 0                     | **3**: cash  | 3                     | **6**: cash      |
| ì£¼ì‹ ë¯¸ë³´ìœ  > ë³´ìœ     | **-1** : hold                 | 0-3: -3       | 0-7: -7               | 3-5= -2      | 3-10: -7              | 6-3= **3**: hold |
| ì£¼ì‹ ë³´ìœ  > ë³´ìœ       | x (ì²˜ìŒì—” ì£¼ì‹ ë³´ìœ ê°€ ë¶ˆê°€ëŠ¥) | **-1** : hold | **-1** : hold         | **-1**: hold | **-1**: hold          | -1               |

ì˜ ë³´ë©´ 2ê°œì˜ ê°’ì„ íŠ¸ë˜í‚¹í•´ì•¼ í•œë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤. i ì‹œì ì˜ ë§ˆì§€ë§‰ì— **ì£¼ì‹ì„ ë³´ìœ í–ˆì„ë•Œì˜ í˜„ê¸ˆ**ê³¼, **ì£¼ì‹ì„ ë³´ìœ í•˜ì§€ ì•Šì€ ê²½ìš°ì˜ í˜„ê¸ˆ**ì„ ë”°ë¡œ ê´€ë¦¬í•´ì•¼ í•œë‹¤. ì£¼ì‹ ë³´ìœ  ì—¬ë¶€ì— ë”°ë¼ ë‹¤ìŒ ë‹¨ê³„ì—ì„œ ì£¼ì‹ì„ íŒŒëŠ”ê²Œ ê°€ëŠ¥í•œì§€ ì—¬ë¶€ê°€ ë‹¬ë¼ì§€ê¸° ë•Œë¬¸ì—.

ì£¼ì‹ì„ ë³´ìœ í•˜ì§€ ì•Šì•˜ì„ ë•Œì˜ í˜„ê¸ˆì„ cash, ì£¼ì‹ì„ ë³´ìœ í–ˆì„ ë•Œì˜ í˜„ê¸ˆì„ holdë¼ê³  í•˜ë©´ ì•„ë˜ì™€ ê°™ì€ ì í™”ì‹ì´ ë„ì¶œ ê°€ëŠ¥í•˜ë‹¤.

```python
cash = max(cash, hold+price[i]-fee) # ì£¼ì‹ ë¯¸ë³´ìœ  > ë¯¸ë³´ìœ , ì£¼ì‹ ë³´ìœ  > ë¯¸ë³´ìœ  ì¤‘ ìµœëŒ€ê°’
hold = max(hold, cash-price[i]) # ì£¼ì‹ ë³´ìœ  > ë³´ìœ , ì£¼ì‹ ë¯¸ë³´ìœ  > ë³´ìœ  ì¤‘ ìµœëŒ€ê°’
```

ì—¬ê¸°ê¹Œì§€ í•˜ë‹¤ë³´ë©´ ê²°êµ­ ì¤‘ìš”í•œ ê²ƒì€ **i ì‹œì ì˜ ë§ˆì§€ë§‰ì— "ì£¼ì‹ì„ ë³´ìœ í•˜ê³  ìˆëŠ”ê°€"**ì˜ ì—¬ë¶€ì™€ ê·¸ ê°ê° ê²½ìš°ì—ì„œì˜ ê°’ì´ ì˜¤ì§ ì¤‘ìš”í•œ ë³€ìˆ˜ë¼ëŠ” ê²ƒì´ ì‚˜ì´ ì˜¤ê²Œ ëœë‹¤. ì˜¤ë‚˜...? DPëŠ” ì •ë§ ì–´ë ¤ì›Œìš”...

ì‚¬ì‹¤ìƒ ë§ˆì§€ë§‰ì—ëŠ” holdê°’ì´ ìµœëŒ€ê°€ ë  ìˆ˜ ì—†ë‹¤. ë§ˆì§€ë§‰ì— ì£¼ì‹ì„ ë“¤ê³  ìˆëŠ”ê±´ ê°™ì€ ì‹œì ì—ì„œ ì£¼ì‹ì„ íŒ ê°’ë³´ë‹¤ ë¬´ì¡°ê±´ ì ê¸° ë•Œë¬¸ì—... (cash[i] > hold[i])

ê·¸ë˜ì„œ ë¬´íŠ¼ ì •ë‹µì€ ì•„ë˜ì™€ ê°™ì´ ë‚˜ì˜¨ë‹¤.

```python
class Solution(object):
    def maxProfit(self, prices, fee):
        cash, hold = 0, -prices[0]
        for i in range(1, len(prices)):
            cash = max(cash, hold + prices[i] - fee)
            hold = max(hold, cash - prices[i])
        return cash
```

 DP ë¬¸ì œ ê°„ê°„íˆ í•˜ë‚˜ì”©ì€ í’€ì–´ì•¼ê² ë‹¤...